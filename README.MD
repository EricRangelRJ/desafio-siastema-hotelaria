# ‚≠ê NT Consult  **Desafio Desenvolvedor Java**

---

## üí• Objetivo:
- Fui desafiado a desenvolver um sistema de reserva de hot√©is que deve ser altamente escal√°vel, capaz de lidar com um grande volume de acessos simult√¢neos, permitindo aos usu√°rios pesquisar, comparar e reservar quartos de hotel de forma eficiente.


## üåêÔ∏è Meus dados:

- **Eric Leonardo S. Rangel**
    - Desenvolvedor backend - Java Pleno.
    - [Acesse meu LinkedIn](https://linkedin.com/in/ericrangelrj)
    - Email: ericlsrangel@gmail.com
    - Contato: 21 96577-0649


## üõ†Ô∏è Funcionalidades

- **Pesquisa de hot√©is**
- **Compara√ß√£o de Op√ß√µes**
- **Reserva de Quartos**
- **Sistema de Notifica√ß√µes**


## üöÄ Sobre a Aplica√ß√£o
- **Desenvolvida utilizando boas pr√°ticas de ‚ÄúClean code‚Äù, com arquitetura em camadas (MVC) **


## üí• Tecnologias Utilizadas
- **Spring Boot:** vers√£o 3.3.3
- **Java:** vers√£o 17
- **Postgres:** Banco Relacional
- **MongoDb:** Banco NoSql
- **Springdoc-openapi-Swagger:** vers√£o 2.0.2
- **Lombok:**  vers√£o 1.18.32
- **Apache Kafka:** Comunica√ß√£o ass√≠ncrona e orientada a eventos 
- **Logback:** Utilizando servidor remoto centralizado em para todos os MSs
- **FeignClient:** Utilizado para comunica√ß√£o s√≠ncrona entre os MSs
- **ModelMapper:** Facilitando a convers√£o de entidades em Dtos e vice versa
- **Docker:** Facilitando a constru√ß√£o do ambiente de desenvolvimento

## üõ†Ô∏è Ferramentas Utilizadas
- [GitHub](https://github.com/)
- [IntelliJ IDEA](https://www.jetbrains.com/idea/)
- [Postman](https://www.postman.com/)
- [Draw.io](https://app.diagrams.net/)



## üòé Design System

![img.png](_img/design-system.png)


## üì∞ Sobre a aplica√ß√£o

### Microservi√ßo customer-service(Clientes)

- Descri√ß√£o: Respons√°vel pelas rotinas de cadastro de clientes que se hospederam em cada hotel. Conta as opera√ß√µes b√°sicas (CRUD).

###  Microservi√ßo review-service(Avalia√ß√£o)

- Descri√ß√£o: Respons√°vel pela persist√™ncia das opini√µes dos clientes do hotel, esse microservi√ßo conta com um banco de dados n√£o relacional NoSql o que mant√©m a velocidade para obten√ß√£o de respostas e integra√ß√£o com os demais.

### Microservi√ßo hotel-service(Hotel)

  - Descri√ß√£o: Microservi√ßo central que guarda a maioria das regras de neg√≥cios solcitadas por esse desafio.

## üìã Swagger
- Acesse as URLs abaixo com o projeto rodando e ter√° acesso aos 3 Swaggers como esse dispon√≠veis na aplica√ß√£o.

![img_2.png](_img/img_2.png)

- http://localhost:8080/hotel-management/api/swagger-ui/index.html#/

- http://localhost:8082/customer-management/swagger-ui/index.html#
 
- http://localhost:8085/review-management/api/swagger-ui/index.html


## üìã Mensageria (EDA)
- Utilizada para garantir a comunica√ß√£o ass√≠ncrona, toler√¢ncia a falhas al√©m de permitir o desacoplamento entre os micro servi√ßos. Foi utilizada para preparar o envio de emails de confirma√ß√£o de reservas bem como notificar o cadastro de novos hot√©is para qualquer outro microservi√ßo. O projeto desenvolvido trabalha em conjunto com o cadastro de avalia√ß√µes.   

![img_3.png](_img/img_3.png)


## üìã Log Centralizado
- Utilizado para facilitar o monitoramento de todos os micrservi√ßos que est√£o em execu√ß√£o, atende ao requisito que abrange logs e m√©tricas em tempo real.

![img_4.png](_img/img_4.png)

## üìã Banco NoSql
![img_5.png](_img/img_5.png)

## üìã PostgreSQL Modelo Entidade Relacionamento
![img_6.png](_img/img_6.png)

## üíª Docker
- Facilitando a subida de ambientes al√©m de possibilitar a configura√ß√£o e subida r√°pida de 3 bancos de dados rodando concomitantemente al√©m de toda a estrutura do Apache Kafka.

![img_7.png](_img/img_7.png)

## ‚úÖ Instru√ß√µes para os testes:


## Docker Compose
- Arquivo que utilizei para a configura√ß√£o dos containers, com o Docker previamente instalado em sua m√°quina basta baixar e rodar o arquivo utilizando o comando "docker-compose up "

```
version: '3.8'

services:

  zookeeper:
    image: docker.io/bitnami/zookeeper:3.9
    ports:
      - "2181:2181"
    environment:
      - ALLOW_ANONYMOUS_LOGIN=yes

  kafka:
    image: 'bitnami/kafka:3.4'
    ports:
      - '9092:9092'
    environment:
      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181
      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092
    depends_on:
      - zookeeper

  db-client-postgres:
    image: postgres:latest
    container_name: postgres-hotel
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: coti
      POSTGRES_DB: hotel-management-db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - my_network

  db-review-mongodb:
    image: mongo:latest
    container_name: mongodb-review
    ports:
      - "27017:27017"
    volumes:
      - mongodb1-data:/data/db
    networks:
      - my_network

  db-customer-mongodb:
    image: mongo:latest
    container_name: mongodb-customer
    ports:
      - "27018:27017"
    volumes:
      - mongodb2-data:/data/db
    networks:
      - my_network

networks:
  broker-kafka:
    driver: bridge
  my_network:
    driver: bridge

volumes:
  postgres_data:
  mongodb1-data:
  mongodb2-data:

```

## Rodar os microservi√ßos
- Logo ap√≥s baixar do reposit√≥rio, com o Maven instalado acessar o diret√≥rio do projeto e rodar o comando: "mvn spring-boot:run". Rodando pela IDE fica ainda mais simples acessando a classe principal do projeto.

## üòé Collection para testes
- Logo ap√≥s estar tudo rodando importar essas Collections no Postman. S√£o as 3 collectios necess√°rias para o teste, estas j√° est√£o pr√©-preenchidas com os dados dos campos.
- [nt-hotel.postman_collection.zip](https://github.com/EricRangelRJ/desafio-sistema-hotelaria-springBoot/blob/main/desafio_hotelaria.postman_collection.zip?raw=true)

# üõ†Ô∏è Testes de Integra√ß√£o

- Devido ao tempo reduzido para entrega s√≥ foram realizados testes de Integra√ß√£o nos endpoints do Controlador do projeto customer-managemente como exemplo para aplica√ß√£o nos demais projetos.

# üíª Melhorias
- Configura√ß√£o de um servidor de email para consumo no Kafka e disparo de mensagens;
- Cobertura integral de testes de integra√ß√£o e unit√°rios;
- Adicionar aquitetura Clean para divis√£o completa do dom√≠nio da aplica√ß√£o do restante do c√≥digo
- Utilizar um servi√ßo de mensagens para push via WhatsApp dos clientes que fizeram reservas no hotel
- Adicionar autentica√ß√£o JWT entre outras....

